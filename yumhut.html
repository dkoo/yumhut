<head>
	<title>yumhut</title>
</head>

<body>
	<div class="container">
		<header>
			<h1>yumhut</h1>
			<h2>where are the yums?</h2>

			{{#if currentUser}}
				signed in as 
			{{else}}
				<h3>Sign in to get some yums</h3>
				<p>Yumhut is a place to house all your favorite yums.</p>
			{{/if}}
			{{> loginButtons}}

			{{#if currentUser}}
				{{> count}}

				{{> add}}
			{{/if}}
		</header>

		<ul class="yums">
			{{#each yums}}
				{{> yum}}
			{{/each}}
		</ul>
	</div>
</body>

<template name="yum">
	{{#if isOwner}}
		<li>
			<form class="edit-yum {{#if editing}}visible{{/if}}">
				<input name="editname_{{id}}" type="text" placeholder="{{name}}" required>
				<input name="editaddress_{{id}}" type="text" placeholder="{{address}}">
				{{favs}}
				<textarea name="editnotes_{{id}}" placeholder="{{notes}}"></textarea>
				<button>save</button>
				<button class="cancel">cancel</button>
			</form>
			<div class="{{#if editing}}hidden{{/if}}">
				<h1>{{name}} <button class="edit" name="name">edit</button></h1>
				<h2>{{address}}</h2>
				<p>{{favs}}</p>
				<p>{{notes}}</p>
			</div>
			<p>{{id}}</p>
			<p><em>added by {{username}}</em></p>
			<button class="delete">delete this yum</button>
		</li>
	{{/if}}
</template>

<template name="count">
	<p>You have {{showCount}} yums.</p>

	{{#if showCountIs 0}}
		<p>Start adding some yums!</p>
	{{/if}}
</template>

<template name="add">
		<button class="add {{#if adding}}{{else}}visible{{/if}}">add a yum</button>
	
		<form class="new-yum {{#if adding}}visible{{/if}}">
			<input id="autocomplete" name="add_name" placeholder="Add a yum" type="text" required>
			<input name="add_address" type="text" placeholder="Address">
			<textarea name="add_favs" placeholder="Your favs (enter each fav on its own line)"></textarea>
			<textarea name="add_notes" placeholder="Description"></textarea>
			<button class="save">save</button> <button class="cancel">cancel</button>
		</form>

		<label class="filter">
			<input type="checkbox" checked="{{filtered}}" />
			Hide checked yums
		</label>
</template>