<head>
	<title>yumhut</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
	<header id="top" class="{{#if deleting}}background{{/if}}">
		<nav></nav>
		{{#if currentUser}}Hi there, {{/if}}
		{{> loginButtons}}
	</header>

		{{> add}}


	<div class="container 
		{{#if currentUser}}
			home
		{{else}}
			{{#if startup}}
				default
			{{/if}}
		{{/if}}">
		<header>
			<h1>yumhut</h1>
			{{#if currentUser}}
				{{> count}}

				<button class="add {{#if adding}}{{else}}visible{{/if}}">add a yum</button>
			{{else}}
				<h2>Where are the yums?</h2>
				<p>Yumhut is a convenient place to house all the places that make you go “yum.” Add a yum, tag it with a location, jot down your favorite things to get there, and you’ll never forget where your favorite yums are again. Sign up to start tracking your yums.</p>
				<h3><i class="fa fa-arrow-up"></i> Sign up to get some yums</h3>
			{{/if}}
		</header>

		{{#if currentUser}}
			<ul class="yums">{{#each yums}}{{> yum}}{{/each}}</ul>
		{{/if}}
	</div>
</body>


<!-- YUM TEMPLATE -->
<template name="yum">{{#if isOwner}}<li>
	<form class="edit-yum {{#if editing}}visible{{/if}}">
		<h1><input name="editname_{{id}}" type="text" placeholder="{{name}}"></h1>
		<h2><input name="editaddress_{{id}}" type="text" placeholder="{{address}}"></h2>
		{{#if countFavs}}
			<ul class="favs">
				{{#each showFavs}}
					<li>{{this}} <a class="deletefav" href="#">&times;</a></li>
				{{/each}}
			</ul>
		{{/if}}
		<input class="addfav" name="fav_{{id}}" type="text" placeholder="Add a fav"> <button name="fav_{{id}}" class="addfav">&plus;</button>
		<textarea name="editnotes_{{id}}" placeholder="{{notes}}"></textarea>
		<button>save changes</button>
		<button class="cancel">wait, no</button>
	</form>
	<div class="{{#if editing}}hidden{{/if}}">
		<a href="#" class="delete" name="Delete this yum">&times;</a>
		<h1>{{name}}</h1>
		{{#if address}}<h2>{{address}}</h2>{{/if}}
		{{#if countFavs}}
			<ul class="favs">
				{{#each showFavs}}
					<li>{{this}}</li>
				{{/each}}
			</ul>
		{{/if}}
		{{#if notes}}<p>{{notes}}</p>{{/if}}
		<a class="edit" href="#">edit</a>
	</div>
	{{#if deleting}}
		{{> delete}}
	{{/if}}
</li>{{/if}}</template>

<!-- YUM COUNT TEMPLATE -->
<template name="count">
	<p>You have 
		{{#if showCountIs 1}}
			just 1 yum. Try adding some more!
		{{else}}
			{{showCount}} yums!
			{{#if showCountIs 0}}
				Try adding some yums...
			{{/if}}
		{{/if}}
	</p>
</template>

<!-- ADD YUM TEMPLATE -->
<template name="add">
	<div id="add" class="{{#if adding}}modal{{/if}}">	
		<form class="new-yum">
			<h1>Add a new yum</h1>
			<input id="autocomplete" name="add_name" placeholder="Enter a yum name" type="text" required>
			<input name="add_address" type="text" placeholder="The yum’s address">
			<textarea name="add_favs" placeholder="Your favs at this place (enter each on its own line)"></textarea>
			<textarea name="add_notes" placeholder="Your notes for this yum"></textarea>
			<button class="save">add it</button> <button class="cancel">wait, don’t add it</button>
		</form>
	</div>
</template>

<template name="delete">
	<div class="deleteme modal">
		<form>
			<h1>Confirm delete</h1>
			<h2>Are you sure you want to delete {{name}}?</h2>
			<button class="yes">Yes, do it</button>
			<button class="no">Wait, no</button>
		</form>
	</div>
</template>